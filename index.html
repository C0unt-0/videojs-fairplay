<!DOCTYPE html>
<html>
	<head>
		<title>Video.js Player with Axinom DRM</title>
		<link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
	</head>
	<body>
		<video
		id="video"
		class="video-js"
		controls
		preload="auto"
		width="640"
		height="264"
	  >
	  	<script src="encoding-indexes.js"></script> 
	  	<script src="encoding.js"></script>
		<script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>
		<script src="videojs-contrib-eme.js"></script>
		<script>
			videoEl = document.getElementById('video');
  	  		player =videojs(videoEl);

			player.eme()

			player.src({
				src: 'https://855a9fc3487ea8637e749dd9.blob.core.windows.net/video-output/PzH65EGa6FQoRTmnvtU2MX/hls/manifest.m3u8',
				keySystems: {
					'com.apple.fps.1_0': {
						certificateUri: 'https://vtb.axinom.com/FPScert/fairplay.cer',
						licenseUri: 'https://drm-fairplay-licensing.axprod.net/AcquireLicense',
						licenseHeaders: {
							'X-AxDRM-Message':
								'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjogMSwiY29tX2tleV9pZCI6ICJmY2U3ZmQxYS1hMjY2LTQ4NGEtYmUyZS1iMDUzMDA1OTkzNGIiLCJtZXNzYWdlIjogeyAgInR5cGUiOiAiZW50aXRsZW1lbnRfbWVzc2FnZSIsICAidmVyc2lvbiI6IDIsICAiY29udGVudF9rZXlzX3NvdXJjZSI6IHsgICAgImlubGluZSI6IFsgICAgICB7ICAgICAgICAiaWQiOiAiNDc0OTExYTYtMTBkZi00YjA2LWIwNDItNmRiNDY1YWY2MjMwIiAgICAgIH0gICAgXSAgfX19.VhbciVo_0Mf6fLWkVoR28R3AsHPZzrNFbqN-8aUh9vE',
						},
						getContentId: function (emeOptions, initData) {						
							return new TextDecoder().decode(initData.filter(item => item !== 0 && item !== 150))	 
                        },
					},
				},
			})
		</script>
	</body>
</html>
